{"version":3,"file":"static/webpack/static/development/pages/index.js.8cee9c46279da8b09158.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from \"react\";\nimport axios from 'axios';\nimport Head from 'next/head';\nimport { scroller } from 'react-scroll';\nconst getTweet = require(\"../scraper-client.js\");\n// import SEO from \"../components/seo\"\nimport Result from '../components/result';\nimport Arrow from '../components/arrow.js';\nimport '../scss/index.scss';\n\nconst errormsg = 'Error: 404 Invalid URL';\nconst ASSET_PREFIX = '/tweet-img/';\n\nclass IndexPage extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n        loading: false,\n        // url: '',\n        blank: true,\n        tweet: ''\n    };\n\n    this.result = React.createRef();\n    this.urlInput = React.createRef();\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  createTweet(url){\n    console.log('axios');\n\n    this.setState({\n      loading: true\n    })\n    console.log('loading')\n\n    // SERVER-SIDE\n    // axios.post('/api', {\n    //   url: url\n    // })\n    axios.post('https://us-central1-tweet-img.cloudfunctions.net/scraper', {\n      url: url\n    })\n    .then(response => {\n      console.log('response')\n      // console.log(response)\n\n      this.setState({\n        tweet: response.data,\n        loading: false\n      });\n\n      console.log('not loading')\n\n    })\n    .catch(error => {\n\n      this.setState({\n        tweet: errormsg,\n        loading: false\n      });\n\n      console.log('not loading')\n    })\n\n  }\n\n  handleSubmit(e){\n    e.preventDefault();\n\n    scroller.scrollTo('result-wrapper', {\n      smooth: true,\n    })\n\n    console.log('Submitted');\n    this.setState({\n        blank: false\n    }, () => this.createTweet(this.urlInput.current.value));\n\n  }\n\n\n  render(){\n    var res;\n    if (this.state.blank){\n      res = null;\n    } else if (this.state.loading){\n      res = <p>Loading...</p>;\n    } else {\n      res = <Result blank={this.state.blank} tweet={this.state.tweet}/>;\n    }\n    return (\n      <>\n        <Head>\n          <title>My page title</title>\n          <meta charSet=\"utf-8\" />\n          <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" key=\"viewport\"/>\n          <meta name=\"description\" content=\"Generate image from tweets\"/>\n          <meta name=\"keywords\" content=\"Twitter,Image,Background,Tweet,Instagram,Social,Media\"/>\n          <meta name=\"author\" content=\"Matias Huapaya\"/>\n          <link rel=\"shortcut icon\" href=\"//logo-bgwhite.png\" />\n        </Head>\n        <div id='container'>\n          <div id='form-wrapper'>\n            <h1>tweet-img</h1>\n            <p>Only tested on some tweets. <a target='__blank' href='https://github.com/mhuap/tweet-img/blob/master/README.md#tweet-support'>See what kinds of tweets we support.</a></p>\n            <form id='top-form' onSubmit={this.handleSubmit}>\n              <label>Enter Tweet URL</label>\n              <div id='form-input'>\n                <input id='url-input'type='text' ref={this.urlInput} name='url' placeholder='twitter.com/status/tweeturl'/>\n                <button><Arrow/></button>\n              </div>\n            </form>\n          </div>\n\n          <div id='result-wrapper' ref={this.result}>\n            {res}\n          </div>\n\n        </div>\n        <footer>\n          <small>Created by <a href='https://twitter.com/matias_huapaya'>Matias Huapaya</a></small>\n        </footer>\n      </>\n    );\n  }\n}\n\nexport default IndexPage\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AAXA;AAYA;AACA;;;AACA;AAAA;AACA;AAAA;AAEA;AACA;AADA;AAGA;AAGA;AACA;AACA;AACA;AAAA;AACA;AADA;AAIA;AACA;AAEA;AACA;AACA;AAFA;AACA;AAIA;AAEA;AAGA;AACA;AACA;AAFA;AACA;AAIA;AACA;AAEA;;;AAEA;AAAA;AACA;AAAA;AAEA;AACA;AADA;AAIA;AACA;AACA;AADA;AAEA;AAAA;AAEA;;;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AAjHA;AACA;AAmHA;;;;A","sourceRoot":""}