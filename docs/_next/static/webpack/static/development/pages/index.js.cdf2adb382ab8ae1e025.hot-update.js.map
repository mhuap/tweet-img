{"version":3,"file":"static/webpack/static/development/pages/index.js.cdf2adb382ab8ae1e025.hot-update.js","sources":["webpack:///./scraper-client.js"],"sourcesContent":["// const cheerio = require(\"cheerio\");\nconst axios = require(\"axios\");\nconst $ = require(\"jquery\");\n// https://twitter.com/dog_feelings\n// const url = 'https://twitter.com/SciShow/status/1208767945813442564'\n// const url = 'https://publish.twitter.com/#'\n// https://twitter.com/redditships/status/1210309670654664719\nconst twitterLogo = require('./components/twitter-logo.js');\nconst verifiedBadge = require('./components/verified.js');\n\nconst str2 = `<div class=\"permalink-tweet\"><a class=\"account-group js-account-group js-action-profile js-user-profile-link js-nav\" href=\"/ProBirdRights\" data-user-id=\"448476934\">\n      <img class=\"avatar js-action-profile-avatar\" src=\"https://pbs.twimg.com/profile_images/684212991714131972/15IGSMB2_bigger.jpg\" alt>\n    <span class=\"FullNameGroup\">\n      <strong class=\"fullname show-popup-with-id u-textTruncate \" data-aria-label-part>birdsrightsactivist</strong><span>&#x200F;</span><span class=\"UserNameBreak\">&#xA0;</span></span><span class=\"username u-dir u-textTruncate\" dir=\"ltr\" data-aria-label-part>@<b>ProBirdRights</b></span></a><span class=\"_timestamp js-short-timestamp \" data-aria-label-part=\"last\" data-time=\"1577303405\" data-time-ms=\"1577303405000\" data-long-form=\"true\">Dec 25</span>\n\n\n\n        <div class=\"js-tweet-text-container\">\n  <p class=\"TweetTextSize TweetTextSize--jumbo js-tweet-text tweet-text\" lang=\"en\" data-aria-label-part=\"0\">reindeer. stay. in. ur. lane.</p>\n</div></div>`\n\nconst str3 = `<div class=\"permalink-tweet\"><a class=\"account-group js-account-group js-action-profile js-user-profile-link js-nav\">\n      <img class=\"avatar js-action-profile-avatar\" src=\"https://pbs.twimg.com/profile_images/1046968391389589507/_0r5bQLl_bigger.jpg\" alt>\n    <span class=\"FullNameGroup\">\n      <strong class=\"fullname show-popup-with-id u-textTruncate \" data-aria-label-part>Thoughts of Dog&#xAE;</strong><span>&#x200F;</span><span class=\"u-hiddenVisually\">Verified account</span><span class=\"UserNameBreak\">&#xA0;</span></span><span class=\"username u-dir u-textTruncate\" dir=\"ltr\" data-aria-label-part>@<b>dog_feelings</b></span></a><span class=\"_timestamp js-short-timestamp \" data-aria-label-part=\"last\" data-time=\"1572893428\" data-time-ms=\"1572893428000\" data-long-form=\"true\">Nov 4</span>\n        <div class=\"js-tweet-text-container\">\n  <p class=\"TweetTextSize TweetTextSize--jumbo js-tweet-text tweet-text\" lang=\"en\" data-aria-label-part=\"0\">the human keeps a picture of me. on the front of their little computer. so they can show everyone they meet. wherever they go. just how beautiful i am</p>\n</div></div>`\n\nconst dev = false;\n\nconst parse = (result) => {\n  result.find(\n    `.follow-bar, .ProfileTweet-action, .tweet-text .u-hidden,\n    .permalink-footer, .stream-item-footer,\n    .js-machine-translated-tweet-container, .tweet-stats-container, .tweet-details-fixer`)\n    .remove();\n\n  let img = result.find('.AdaptiveMedia-container img');\n  img.removeAttr('style')\n  result.find('.AdaptiveMediaOuterContainer').replaceWith(img);\n\n  let accountInfo = result.find('.account-group, .js-short-timestamp');\n  accountInfo.removeAttr('href');\n  accountInfo.removeAttr('data-user-id');\n  result.find('.content.clearfix').replaceWith(accountInfo);\n\n  accountInfo.after(\"<img id='logo' src='/twitterlogoblue.png'/>\");\n  // result.find('.account-group').after(twitterLogo);\n\n  console.log(result);\n\n  let verified = result.find('.u-hiddenVisually');\n  if (verified.length){\n    verified.replaceWith(\"<img id='badge' src='/verified.png'/>\");\n    // verified.replaceWith(verifiedBadge);\n  }\n\n  console.log(result.html())\n  return result.html();\n}\n\nconst getTweet = (siteUrl) => {\n  if (dev){\n    // const $ = cheerio.load(str3);\n    let $all = $(str3);\n    let tweet = $($all);\n    let allImgs = tweet.find('img').each(function(i, elem) {\n      $(this).attr('crossorigin', '*');\n      // console.log(elem);\n    })\n    let re = parse(tweet).trim();\n      // console.log(re);\n    return new Promise((resolve, reject) => {\n      resolve(re);\n    })\n  }\n\n  const anyoriginurl = \"https://cors-anywhere.herokuapp.com/\" + siteUrl;\n\n  return axios.get(anyoriginurl)\n  .then((response) => {\n    if(response.status === 200){\n      // const $ = cheerio.load(response.data);\n      console.log('hello');\n      let $all = $(response.data);\n      let tweet = $($all).find('.permalink-tweet');\n\n      let allImgs = $('.permalink-tweet img').each(function(i, elem) {\n        // console.log(result.findthis.html());\n        $(this).attr('crossorigin', 'anonymous');\n      })\n\n      return parse(tweet);\n    }\n  })\n  .catch(error => {\n    console.log(error);\n    throw error;\n  });\n\n};\n\nmodule.exports = getTweet;\n"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AADA;AACA;AAAA;AACA;AACA;AAWA;AAQA;AACA;AACA;AACA;AAMA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;;;;A","sourceRoot":""}