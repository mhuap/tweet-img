import e from"querystring";var t=/https?|ftp|gopher|file/;function r(r){"string"==typeof r&&(r=f(r));var a=function(e,t,r){var a=e.auth,o=e.hostname,s=e.protocol||"",h=e.pathname||"",c=e.hash||"",p=e.query||"",n=!1;a=a?encodeURIComponent(a).replace(/%3A/i,":")+"@":"",e.host?n=a+e.host:o&&(n=a+(~o.indexOf(":")?"["+o+"]":o),e.port&&(n+=":"+e.port)),p&&"object"==typeof p&&(p=t.encode(p));var l=e.search||p&&"?"+p||"";return s&&":"!==s.substr(-1)&&(s+=":"),e.slashes||(!s||r.test(s))&&!1!==n?(n="//"+(n||""),h&&"/"!==h[0]&&(h="/"+h)):n||(n=""),c&&"#"!==c[0]&&(c="#"+c),l&&"?"!==l[0]&&(l="?"+l),{protocol:s,host:n,pathname:h=h.replace(/[?#]/g,encodeURIComponent),search:l=l.replace("#","%23"),hash:c}}(r,e,t);return""+a.protocol+a.host+a.pathname+a.search+a.hash}var a="http://",o="w.w",s=a+o,h=/^https?|ftp|gopher|file/,c=/^(.+?)([#?].*)/,p=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,n=/^([a-z0-9.+-]*:)?\/\/\/*/i,l=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function i(e){try{return decodeURI(e)}catch(t){return e}}function f(t,a,f){void 0===a&&(a=!1),void 0===f&&(f=!1);var m=(t=i(t.trim())).match(c);t=m?m[1].replace(/\\/g,"/")+m[2]:t.replace(/\\/g,"/"),l.test(t)&&"/"!==t.slice(-1)&&(t+="/");var u=!/(^javascript)/.test(t)&&t.match(p),v=n.test(t),d="";u&&(h.test(u[1])||(d=u[1].toLowerCase(),t=""+u[2]+u[3]),u[2]||(v=!1,h.test(u[1])?(d=u[1],t=""+u[3]):t="//"+u[3]),3!==u[2].length&&1!==u[2].length||(d=u[1],t="/"+u[3]));var g,b=t.match(/(:[0-9]+)/),y="";b&&b[1]&&3===b[1].length&&(t=t.replace(y=b[1],y+"00"));var w={},R="",U="";try{g=new URL(t)}catch(e){R=e,d||f||!/^\/\//.test(t)||/^\/\/.+[@.]/.test(t)||(U="/",t=t.substr(1));try{g=new URL(t,s)}catch(e){return w.protocol=d,w.href=d,w}}w.slashes=v&&!U,w.host=~g.host.indexOf(o)?"":g.host,w.hostname=~g.hostname.indexOf(o)?"":g.hostname.replace(/(\[|\])/g,""),w.protocol=R?d||null:g.protocol,w.search=g.search.replace(/\\/g,"%5C"),w.hash=g.hash.replace(/\\/g,"%5C");var x=t.split("#");!w.search&&~x[0].indexOf("?")&&(w.search="?"),w.hash||""!==x[1]||(w.hash="#"),w.query=a?e.decode(g.search.substr(1)):w.search.substr(1),w.pathname=U+i(g.pathname).replace(/"/g,"%22"),"about:"===w.protocol&&"blank"===w.pathname&&(w.protocol="",w.pathname=""),R&&"/"!==t[0]&&(w.pathname=w.pathname.substr(1)),d&&!h.test(d)&&"/"!==t.slice(-1)&&"/"===w.pathname&&(w.pathname=""),w.path=w.pathname+w.search,w.auth=[g.username,g.password].map(decodeURIComponent).filter(Boolean).join(":"),w.port=g.port,y&&(w.host=w.host.replace(y+"00",y),w.port=w.port.slice(0,-2)),w.href=U?""+w.pathname+w.search+w.hash:r(w);var O=/^(file)/.test(w.href)?["host","hostname"]:[];return Object.keys(w).forEach(function(e){~O.indexOf(e)||(w[e]=w[e]||null)}),w}var m=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,u=/https?|ftp|gopher|file/;function v(e,t){var o="string"==typeof e?f(e):e;e="object"==typeof e?r(e):e;var h=f(t),c="";o.protocol&&!o.slashes&&(c=o.protocol,e=e.replace(o.protocol,""),c+="/"===t[0]||"/"===e[0]?"/":""),c&&h.protocol&&(c="",h.slashes||(c=h.protocol,t=t.replace(h.protocol,"")));var p=e.match(m);p&&!h.protocol&&(e=e.substr((c=p[1]+(p[2]||"")).length),/^\/\/[^\/]/.test(t)&&(c=c.slice(0,-1)));var n=new URL(e,s+"/"),l=new URL(t,n).toString().replace(s,""),i=h.protocol||o.protocol;return i+=o.slashes||h.slashes?"//":"",!c&&i?l=l.replace(a,i):c&&(l=l.replace(a,"")),u.test(l)||~t.indexOf(".")||"/"===e.slice(-1)||"/"===t.slice(-1)||"/"!==l.slice(-1)||(l=l.slice(0,-1)),c&&(l=c+("/"===l[0]?l.substr(1):l)),l}function d(e,t){return f(v(e,t))}export{f as parse,r as format,v as resolve,d as resolveObject};
//# sourceMappingURL=index.mjs.map
