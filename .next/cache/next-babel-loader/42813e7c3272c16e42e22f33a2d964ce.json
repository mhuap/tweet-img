{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport axios from 'axios';\nimport html2canvas from 'html2canvas'; // import { useRouter } from 'next/router'\n// import SEO from \"../components/seo\"\n\nimport '../scss/index.scss';\nimport '../scss/tweet.scss';\n\nclass IndexPage extends React.Component {\n  // const router = useRouter()\n  // const { tweeturl } = router.query\n  constructor(props) {\n    super(props);\n    this.state = {\n      url: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    e.preventDefault();\n    this.setState({\n      url: e.target.value\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault(); //making a post request with the fetch API\n\n    axios.post('/api', {\n      url: this.state.url\n    }).then(response => {\n      // console.log(response.data)\n      const div = document.getElementById('tweet');\n      div.innerHTML = response.data; // this.clean(response.data)\n    }).catch(error => console.log(error));\n  }\n\n  genCanvas() {\n    html2canvas(document.querySelector(\"#tweet\")).then(function (canvas) {\n      document.body.appendChild(canvas);\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      id: \"container\"\n    }, __jsx(\"h1\", null, \"tweet-img\"), __jsx(\"form\", {\n      onSubmit: this.handleSubmit\n    }, __jsx(\"label\", null, \"Tweet URL\"), __jsx(\"input\", {\n      id: \"url-input\",\n      type: \"text\",\n      onChange: this.handleChange,\n      name: \"url\",\n      placeholder: \"twitter.com/tweeturl\"\n    }), __jsx(\"input\", {\n      type: \"submit\",\n      value: \"Submit\"\n    })), __jsx(\"div\", {\n      id: \"tweet-container-container\"\n    }, __jsx(\"div\", {\n      id: \"tweet-container\"\n    }, __jsx(\"div\", {\n      id: \"tweet\"\n    }))), __jsx(\"button\", {\n      onClick: this.genCanvas\n    }, \"Save\"));\n  }\n\n} // IndexPage.getInitialProps = async ({ req }) => {\n//   const res = await axios.post('/');\n//   const json = await res.json();\n//   return { tweeturl: json.url };\n// }\n\n\nexport default IndexPage;","map":{"version":3,"sources":["/Users/Matias/Documents/ImageTweet/tweet-img/pages/index.js"],"names":["React","axios","html2canvas","IndexPage","Component","constructor","props","state","url","handleChange","bind","handleSubmit","e","preventDefault","setState","target","value","post","then","response","div","document","getElementById","innerHTML","data","catch","error","console","log","genCanvas","querySelector","canvas","body","appendChild","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,aAAxB,C,CACA;AACA;;AACA,OAAO,oBAAP;AACA,OAAO,oBAAP;;AAGA,MAAMC,SAAN,SAAwBH,KAAK,CAACI,SAA9B,CAAwC;AACtC;AACA;AACAC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACTC,MAAAA,GAAG,EAAE;AADI,KAAb;AAIA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACD;;AAEDD,EAAAA,YAAY,CAACG,CAAD,EAAG;AACbA,IAAAA,CAAC,CAACC,cAAF;AACA,SAAKC,QAAL,CAAc;AACVN,MAAAA,GAAG,EAAEI,CAAC,CAACG,MAAF,CAASC;AADJ,KAAd;AAGD;;AAEDL,EAAAA,YAAY,CAACC,CAAD,EAAG;AACbA,IAAAA,CAAC,CAACC,cAAF,GADa,CAEb;;AACAZ,IAAAA,KAAK,CAACgB,IAAN,CAAW,MAAX,EAAmB;AACjBT,MAAAA,GAAG,EAAE,KAAKD,KAAL,CAAWC;AADC,KAAnB,EAGCU,IAHD,CAGMC,QAAQ,IAAI;AAChB;AACA,YAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AACAF,MAAAA,GAAG,CAACG,SAAJ,GAAgBJ,QAAQ,CAACK,IAAzB,CAHgB,CAIhB;AACD,KARD,EASCC,KATD,CASOC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAThB;AAUD;;AAEDG,EAAAA,SAAS,GAAE;AACT3B,IAAAA,WAAW,CAACmB,QAAQ,CAACS,aAAT,CAAuB,QAAvB,CAAD,CAAX,CAA8CZ,IAA9C,CAAmD,UAASa,MAAT,EAAiB;AAClEV,MAAAA,QAAQ,CAACW,IAAT,CAAcC,WAAd,CAA0BF,MAA1B;AACD,KAFD;AAGD;;AAEDG,EAAAA,MAAM,GAAE;AACN,WACE;AAAK,MAAA,EAAE,EAAC;AAAR,OACE,8BADF,EAEE;AAAM,MAAA,QAAQ,EAAE,KAAKvB;AAArB,OACE,iCADF,EAEE;AAAO,MAAA,EAAE,EAAC,WAAV;AAAqB,MAAA,IAAI,EAAC,MAA1B;AAAiC,MAAA,QAAQ,EAAE,KAAKF,YAAhD;AAA8D,MAAA,IAAI,EAAC,KAAnE;AAAyE,MAAA,WAAW,EAAC;AAArF,MAFF,EAGE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC;AAA3B,MAHF,CAFF,EAQE;AAAK,MAAA,EAAE,EAAC;AAAR,OACE;AAAK,MAAA,EAAE,EAAC;AAAR,OACE;AAAK,MAAA,EAAE,EAAC;AAAR,MADF,CADF,CARF,EAcE;AAAQ,MAAA,OAAO,EAAE,KAAKoB;AAAtB,cAdF,CADF;AAmBD;;AA7DqC,C,CAgExC;AACA;AACA;AACA;AACA;;;AAEA,eAAe1B,SAAf","sourcesContent":["import React from \"react\";\nimport axios from 'axios';\nimport html2canvas from 'html2canvas';\n// import { useRouter } from 'next/router'\n// import SEO from \"../components/seo\"\nimport '../scss/index.scss';\nimport '../scss/tweet.scss';\n\n\nclass IndexPage extends React.Component {\n  // const router = useRouter()\n  // const { tweeturl } = router.query\n  constructor(props) {\n    super(props);\n    this.state = {\n        url: '',\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e){\n    e.preventDefault();\n    this.setState({\n        url: e.target.value,\n    });\n  }\n\n  handleSubmit(e){\n    e.preventDefault();\n    //making a post request with the fetch API\n    axios.post('/api', {\n      url: this.state.url\n    })\n    .then(response => {\n      // console.log(response.data)\n      const div = document.getElementById('tweet');\n      div.innerHTML = response.data;\n      // this.clean(response.data)\n    })\n    .catch(error => console.log(error))\n  }\n\n  genCanvas(){\n    html2canvas(document.querySelector(\"#tweet\")).then(function(canvas) {\n      document.body.appendChild(canvas);\n    });\n  }\n\n  render(){\n    return (\n      <div id='container'>\n        <h1>tweet-img</h1>\n        <form onSubmit={this.handleSubmit}>\n          <label>Tweet URL</label>\n          <input id='url-input'type='text' onChange={this.handleChange} name='url' placeholder='twitter.com/tweeturl'/>\n          <input type=\"submit\" value=\"Submit\"/>\n        </form>\n\n        <div id='tweet-container-container'>\n          <div id='tweet-container'>\n            <div id='tweet'></div>\n          </div>\n        </div>\n\n        <button onClick={this.genCanvas}>Save</button>\n\n      </div>\n    );\n  }\n}\n\n// IndexPage.getInitialProps = async ({ req }) => {\n//   const res = await axios.post('/');\n//   const json = await res.json();\n//   return { tweeturl: json.url };\n// }\n\nexport default IndexPage\n"]},"metadata":{},"sourceType":"module"}